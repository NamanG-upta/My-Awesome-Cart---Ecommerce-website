{% extends 'shop/basic.html' %}

{% block title%} {{produ.product_name}} - My Awesome Cart{% endblock %}
{% block body %}
<div class="container my-4">
    <div class="row">
    <div class="col-md-4">
    <div class="row">
        <img src="/media/{{produ.image}}" width="255px" height="350px">
        </div>
        <div class="row">
            <button class="btn btn-primary my-2">BUY NOW </button>
        <button class="btn btn-primary mx-3 my-2 ">ADD TO CART</button>
        </div>
    </div>
    <div class="col-md-8">
        <h2>{{produ.product_name}}</h2>
        <p><b> Rs.{{produ.price}}</b></p>
        <p>{{produ.desc}}</p>

    </div>
        </div>
</div>



{% endblock %}

  {% block js %}

      <script>
          console.log('working');
          if(localStorage.getItem('cart') == null) {
          var cart = {};
          }
          else
          {
          cart = JSON.parse(localStorage.getItem('cart'));
          document.getElementById('cart').innerHTML = Object.keys(cart).length;
          }

          $('.cart').click(function(){
          console.log('clicked');
          var idstr = this.id.toString();
          console.log(idstr);
          if (cart[idstr] != undefined)
          {
          cart[idstr] = cart[idstr] + 1;
          }
          else
          {
          cart[idstr] = 1;
          }
          console.log(cart);
          localStorage.setItem('cart', JSON.stringify(cart));
          });
          $('#popcart').popover()

          document.getElementById("popcart").setAttribute('data-content','<h5>Cart</h5>');

</script>

      {% endblock %}